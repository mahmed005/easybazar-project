<%- include('header') %>
    <% additionalCss=['/styles/categorypage.css']; %>

        <div class="product-container">
            <% for (let i=0; i < products.length; i++) {%>
                <div class="product-div">
                    <div class="image-div">
                        <img class="product-image" src="<%= products[i].pic_path%>" alt="Interent Issue">
                    </div>
                    <div class="description-div">
                        <div class="text-div">
                            <p class="product-name">
                                <%= products[i].p_name%>
                            </p>
                            <p class="Description-heading">
                                Description
                            </p>
                            <p class="text-container" onclick="toggleText(this)">
                                <%= products[i].p_description%>
                            </p>
                            <%if(products[i]["reviews"].length != 0) {%>
                            <h2 style="margin-bottom: 0px;">Reviews</h2>
                            <%for(let j = 0; j < products[i]["reviews"].length ; j++) {%>
                                <p style="margin-top: 5px;"><%= products[i]["reviews"][j].review%></p>
                                <%}%>
                                <%}%>
                        </div>
                        <div class="buttons-div">
                            <p class="headtxt">Availability: </p>
                            <% if(products[i].stock > 0) {%>
                            <p class="Avalibility">In Stock</p>
                            <%} else {%>
                                <p class="Avalibility">Out of Stock</p>
                                <%}%>
                            <p class="headtxt">Price: </p>
                            <p class="Price">PKR <%= products[i].price %></p>
                            <button class="btn btn2" data-pid="<%= products[i].p_id%>">Add to Wishlist</button>
                            <button class="btn1" data-pid="<%= products[i].p_id%>">Add to Cart</button>
                            <button class="btn btn3" data-pid="<%= products[i].p_id%>">Buy Now</button>
                        </div>
                    </div>
                </div>
                <%}%>
        </div>
        <script type="module" src="/scripts/product-list.js">
        </script>
        <script>
            function toggleText(element) {
    element.classList.toggle('expanded');
}
        </script>
        

        <%- include("footer")%>